if ZMK_POINTING

config ZMK_POINTER_2S_MIXER
    bool "2-sensor pointer mixer"
    default y
    depends on INPUT

endif

if ZMK_POINTER_2S_MIXER

config POINTER_2S_MIXER_LAZY_INIT
  bool "Lazy init"
  default n
  help
    Make all the calculations not on boot but on fist data event (useful to see logs)

config POINTER_2S_MIXER_ENSURE_SYNC
  bool "Ensure data from both sensors"
  default y
  help
    Do not calculate anything until both sensors start to report data

config POINTER_2S_MIXER_SYNC_WINDOW_MS
  int "Sync window, msec"
  default 24
  help
    Data from both sensors must come in this window

config POINTER_2S_MIXER_REMAINDER_TTL
  int "X/Y remainder TTL, msec"
  default 16

config POINTER_2S_MIXER_TWIST_REMAINDER_TTL
  int "Scroll remainder TTL, msec"
  default 32

config POINTER_2S_MIXER_TWIST_FILTER_TTL
  int "Time filter window, msec"
  default 100
  help
    Singular events in this timeframe (msec) will be filtered out

config POINTER_2S_MIXER_TWIST_FILTER_DEBOUNCE
  int "Time filter debouce, msec"
  default 24

config POINTER_2S_MIXER_DIRECTION_FILTER_EN
  bool "Direction filter"
  default y
  help
    First event in the opposite direction will be filtered out

config POINTER_2S_MIXER_DIRECTION_FILTER_TTL
    int "Direction filter value TTL, msec"
    default 500

config POINTER_2S_MIXER_34_FILTER_EN
  bool "3/4 filter"
  default y
  help
    Filter out movement events where 3 out of 4 values are below threshold

config POINTER_2S_MIXER_FEEDBACK_EN
  bool "Enable feedback"
  default y

config POINTER_2S_MIXER_SCROLL_DISABLES_POINTER
  bool "Scroll disables pointer"
  default n

config POINTER_2S_MIXER_POINTER_AFTER_SCROLL_ACTIVATION
  int "Period of pointer inactivity"
  default 100

config POINTER_2S_MIXER_TWIST_MAX_VALUE
  int "Maximum reasonable value for twist"
  default 750

config POINTER_2S_MIXER_SIGNIFICANT_MOVEMENT_MUL
  int "Significant translation multiplier"
  default 3

config POINTER_2S_MIXER_DELTA_Y_OVER_TRANS_MAG_MUL
  int "Delta Y over translation mangitude multiplier"
  default 5

config POINTER_2S_MIXER_DELTA_Y_OVER_TRANS_MAG_DIV
  int "Delta Y over translation mangitude divisor"
  default 3

config POINTER_2S_MIXER_FEEDBACK_MAX_CONTINUOUS
  int "Maximum continuous feedback duration, msec"
  default 150

config POINTER_2S_MIXER_FEEDBACK_COOLDOWN
  int "Feedback cooldown, msec"
  default 25

config POINTER_2S_MIXER_EMA_ALPHA
  int "Alpha-value for EMA filter, N/100"
  default 25

config POINTER_2S_MIXER_STEADY_THRES
  int "Non significant movement threshold"
  default 5

config POINTER_2S_MIXER_STEADY_COOLDOWN
  int "Twist after movement, msec"
  default 100

config POINTER_2S_MIXER_DEFAULT_MOVE_COEF
  int "Default pointer sensitivity in %"
  default 20

config POINTER_2S_MIXER_DEFAULT_TWIST_COEF
  int "Default twist scroll sensitivity in %"
  default 5

endif # ZMK_POINTER_2S_MIXER
